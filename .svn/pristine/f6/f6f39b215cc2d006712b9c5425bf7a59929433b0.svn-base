<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.htkj.cfdScenic.app.dao.ShopInformationDao">

<resultMap type="com.htkj.cfdScenic.app.model.ShopInformation" id="ShopInformation">
<id property="id" column="id"/>
<result property="name" column="name"/>
<result property="headImg" column="head_img"/>
<result property="address" column="address"/>
<result property="latitude" column="latitude"/>
<result property="longitude" column="longitude"/>
<result property="phone" column="phone"/>
<result property="isWifi" column="is_wifi"/>
<result property="isYushi" column="is_yushi"/>
<result property="isBlss" column="is_blss"/>
<result property="isMedia" column="is_media"/>
<result property="isFood" column="is_food"/>
<result property="content" column="content"/>
<result property="backgroudImg" column="backgroud_img"/>
<result property="startDate" column="start_date"/>
<result property="endDate" column="end_date"/>
<result property="shopUserId" column="shop_user_id"/>
<result property="shopId" column="shop_id"/>
<result property="payNotes" column="pay_notes"/>
<result property="sex" column="sex"/>
<result property="age" column="age"/>
<result property="realName" column="realName"/>
<result property="idCard" column="idCard"/>
<result property="holdCardImg" column="hold_Card_Img"/>
<result property="faceCardImg" column="face_Card_Img"/>
<result property="backCardImg" column="back_Card_Img"/>
<result property="businessScope" column="business_Scope"/>
<result property="accountType" column="account_Type"/>
<result property="accountName" column="account_Name"/>
<result property="bankCard" column="bank_Card"/>
<result property="accountBank" column="account_Bank"/>
<result property="isLicense" column="is_License"/>
<result property="licenseImg" column="license_Img"/>
<result property="otherImg1" column="other_Img1"/>
<result property="otherImg2" column="other_Img2"/>
<result property="createTime" column="createTime"/>
<result property="shopImg" column="shop_Img"/>
<result property="state" column="state"/>
<result property="isAudit" column="is_Audit"/>
<result property="cashPassWord" column="cash_PassWord"/>
</resultMap>


<insert id="insertShopInformation" parameterType="com.htkj.cfdScenic.app.model.ShopInformation" >

insert into shop_information(
id,name,head_img,address,latitude,longitude,phone,is_Wifi,is_Yushi,is_Blss,is_Media,is_Food,content,backgroud_Img,start_Date,end_Date,shop_User_Id,shop_Id,pay_Notes,sex,
age,realName,idCard,hold_Card_Img,face_Card_Img,back_Card_Img,business_Scope,account_Type,account_Name,bank_Card,account_Bank,is_License,license_Img,other_Img1,other_Img2,createTime,shop_Img,state,is_Audit,cash_PassWord

)values(
#{id},#{name},#{headImg},#{address},#{latitude},#{longitude},#{phone},#{isWifi},#{isYushi},#{isBlss},#{isMedia},#{isFood},#{content},#{backgroudImg},#{startDate},#{endDate},#{shopUserId},#{shopId},#{payNotes},#{sex},
#{age},#{realName},#{idCard},#{holdCardImg},#{faceCardImg},#{backCardImg},#{businessScope},#{accountType},#{accountName},#{bankCard},#{accountBank},#{isLicense},#{licenseImg},#{otherImg1},#{otherImg2},#{createTime},#{shopImg},#{state},#{isAudit},#{cashPassWord}
)

</insert>



	<select id="linkSelect" parameterType="string" resultType="map">
		select 
			si.id as informationId,si.name,sg.id as shopGroupId
		from
			shop_information si join shops_group sg on  si.shop_id = sg.id
		where 
			si.name like CONCAT('%',#{keyWord,jdbcType=VARCHAR},'%')
	</select>
	<select id="selectByShopId" parameterType="String" resultType="map">
		select
			id,
			name
		from
			shop_information
		where
			shop_id = #{id}  	
	</select>
	<select id="selectById" parameterType="long" resultType="map">
		select
			id,
			name,
			head_img,
			address,
			latitude,
			longitude,
			phone,
			is_wifi,
			is_yushi,
			is_blss,
			is_media,
			is_food,
			content,
			backgroud_img,
			DATE_FORMAT(start_date,'%Y-%m-%d %h:%i:%s') AS start_date,
			DATE_FORMAT(end_date,'%Y-%m-%d %h:%i:%s') AS end_date,
			shop_id,
			pay_notes
		from
			shop_information
		where
			id = #{id}  	
	</select>
	<select id="selectShopInformation" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			content
		from
			shop_information
		where
			shop_id = #{shopId}
	</select>
	<select id="selectShopInformation_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = #{shopId}
	</select>
	<select id="findHotel" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 1
	</select>
	<select id="findHotel_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 1
	</select>
	<select id="findHotelPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 1 limit #{page},#{rows}
	</select>
	<select id="findAllRestaurant" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 2
	</select>
	<select id="findAllRestaurant_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 2
	</select>
	<select id="findAllRestaurantPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 2 limit #{page},#{rows}
	</select>
	<select id="findAllSnack" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 4
	</select>
	<select id="findAllSnack_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 4
	</select>
	<select id="findAllSnackPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 4 limit #{page},#{rows}
	</select>
	
	
	<select id="storeMessage" parameterType="map" resultType="map">
		select 
			si.id,
			si.name,
			si.head_img,
			si.address,
			si.latitude,
			si.longitude,
			si.phone,
			si.is_wifi,
			si.is_yushi,
			si.is_blss,
			si.is_media,
			si.is_food,
			si.content,
			si.backgroud_img,
			DATE_FORMAT(si.start_date,'%Y-%m-%d %h:%i:%s') AS start_date,
			DATE_FORMAT(si.end_date,'%Y-%m-%d %h:%i:%s') AS end_date,
			si.shop_id,
			si.pay_notes
		from shop_information si join shop_user su on si.id = su.shop_information_id where si.shop_id=#{status}  and su.id=#{userId}
	</select>
	<select id="selectShopInformationPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			content
		from
			shop_information
		where
			shop_id = #{shopId} limit #{page},#{rows}
	</select>
	<select id="findAllInformation" parameterType="int" resultType="map">
		select
			id,
			name,
			IFNULL(longitude,"") as longitude,
			IFNULL(latitude,"") as latitude,
			IFNULL(phone,"")as telPhone
		from
			shop_information
		where
			is_audit = 1 and state = 0
		<if test="_parameter == 2">
			and shop_id = 1
		</if>
		<if test="_parameter == 3">
			and shop_id = 2
		</if>
		<if test="_parameter == 4">
			and shop_id = 4
		</if>
		<if test="_parameter == 5">
			and shop_id = 3
		</if>
	</select>
</mapper>