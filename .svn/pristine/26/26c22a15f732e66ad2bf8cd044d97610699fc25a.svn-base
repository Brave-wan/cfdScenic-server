<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.htkj.cfdScenic.app.dao.ShopInformationDao">

<resultMap type="com.htkj.cfdScenic.app.model.ShopInformation" id="ShopInformation">
<id property="id" column="id"/>
<result property="name" column="name"/>
<result property="headImg" column="head_img"/>
<result property="address" column="address"/>
<result property="latitude" column="latitude"/>
<result property="longitude" column="longitude"/>
<result property="phone" column="phone"/>
<result property="isWifi" column="is_wifi"/>
<result property="isYushi" column="is_yushi"/>
<result property="isBlss" column="is_blss"/>
<result property="isMedia" column="is_media"/>
<result property="isFood" column="is_food"/>
<result property="content" column="content"/>
<result property="backgroudImg" column="backgroud_img"/>
<result property="startDate" column="start_date"/>
<result property="endDate" column="end_date"/>
<result property="shopUserId" column="shop_user_id"/>
<result property="shopId" column="shop_id"/>
<result property="payNotes" column="pay_notes"/>
</resultMap>


	<select id="linkSelect" parameterType="string" resultType="map">
		select 
			si.id as informationId,si.name,sg.id as shopGroupId
		from
			shop_information si join shops_group sg on  si.shop_id = sg.id
		where 
			si.name like CONCAT('%',#{keyWord,jdbcType=VARCHAR},'%')
	</select>
	<select id="selectByShopId" parameterType="String" resultType="map">
		select
			id,
			name
		from
			shop_information
		where
			shop_id = #{id}  	
	</select>
	<select id="selectById" parameterType="long" resultType="map">
		select
			id,
			name,
			head_img,
			address,
			latitude,
			longitude,
			phone,
			is_wifi,
			is_yushi,
			is_blss,
			is_media,
			is_food,
			content,
			backgroud_img,
			DATE_FORMAT(start_date,'%Y-%m-%d %h:%i:%s') AS start_date,
			DATE_FORMAT(end_date,'%Y-%m-%d %h:%i:%s') AS end_date,
			shop_id,
			pay_notes
		from
			shop_information
		where
			id = #{id}  	
	</select>
	<select id="selectShopInformation" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			content
		from
			shop_information
		where
			shop_id = #{shopId}
	</select>
	<select id="selectShopInformation_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = #{shopId}
	</select>
	<select id="findHotel" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 1
	</select>
	<select id="findHotel_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 1
	</select>
	<select id="findHotelPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 1 limit #{page},#{rows}
	</select>
	<select id="findAllRestaurant" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 2
	</select>
	<select id="findAllRestaurant_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 2
	</select>
	<select id="findAllRestaurantPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 2 limit #{page},#{rows}
	</select>
	<select id="findAllSnack" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			backgroud_img,
			content
		from
			shop_information
		where
			shop_id = 4
	</select>
	<select id="findAllSnack_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			shop_information
		where
			shop_id = 4
	</select>
	
	
	<select id="storeMessage" parameterType="map" resultType="map">
		select * from shop_information si join shops_group sg on si.shop_id = sg.id where sg.id in (#{status})
	</select>
	<select id="selectShopInformationPage" parameterType="map" resultType="map">
		select
			id,
			name,
			head_img,
			content
		from
			shop_information
		where
			shop_id = #{shopId} limit #{page},#{rows}
	</select>
</mapper>