<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.htkj.cfdScenic.app.dao.UserAccountLogDao">

	<select id="selectUserMessage" resultType="map" parameterType="long">
		select 
		id,
		name,
		trade_integration,
		integration,
		DATE_FORMAT(create_time,'%Y-%c-%d %h:%i:%s') as pay_time 
		from user_account_log where user_id=#{userId} and type = 1 order by create_time
	</select>
	
	<select id="selectShopMessage" resultType="map" parameterType="long">
		select 
		id,
		name,
		trade_integration,
		integration,
		DATE_FORMAT(create_time,'%Y-%c-%d %h:%i:%s') as create_time 
		from user_account_log where shop_id=#{shopId} and type = 1 order by create_time
	</select>
	<select id="getTradeLog" parameterType="long" resultType="map">
		select
			id,
			name,
			price,
			balance,
			trade_integration,
			integration,
			DATE_FORMAT(create_time,'%Y-%m-%d %h:%i:%s') as createTime
		from
			user_account_log
		where
			user_id = #{userId} AND type = #{type}
	</select>
	<insert id="saveUserAccountLog" parameterType="com.htkj.cfdScenic.app.model.UserAccountLog">
		INSERT INTO user_account_log(
				id,
				name,
				type,
				price,
				balance,
				trade_integration,
				integration,
				create_time,
				shop_id,
				user_id,
				pay_type
		)VALUES(
				#{id},
				#{name},
				#{type},
				#{price},
				#{balance},
				#{tradeIntegration},
				#{integration},
				#{createTime},
				#{shopId},
				#{userId},
				#{payType}
		)
	</insert>
	
	<select id="selectShopList" resultType="map" parameterType="map">
		select 
		id,
		name,
		trade_integration,
		DATE_FORMAT(create_time,'%Y-%c-%d %h:%i:%s') as create_time 
		from 
		user_account_log 
		where 
		user_id=#{userId} and type = 1 order by create_time
	</select>
	
	<select id="selectShopList_count" resultType="int" parameterType="map">
		select 
		count(1)  
		from 
		user_account_log 
		where 
		user_id=#{userId} and type = 1 order by create_time
	</select>
	
	
	<select id="selectUserList" resultType="map" parameterType="map">
		select 
		id,
		name,
		trade_integration,
		DATE_FORMAT(create_time,'%Y-%c-%d %h:%i:%s') as create_time 
		from 
		user_account_log 
		where 
		user_id=#{userId} and type = 1 order by create_time
	</select>
	
	<select id="selectUserList_count" resultType="int" parameterType="map">
		select 
		count(1)  
		from 
		user_account_log 
		where 
		user_id=#{userId} and type = 1 order by create_time
	</select>
	
	
	
	<insert id="insertMessage" parameterType="com.htkj.cfdScenic.app.model.UserAccountLog">
		insert into 
		user_account_log 
		(id,name,type,price,balance,trade_integration,integration,create_time,shop_id,user_id) 
		values 
		(#{id},#{name},#{type},#{price},#{balance},#{tradeIntegration},#{integration},now(),#{shopId},#{userId})
	</insert>
	
	
	
</mapper>