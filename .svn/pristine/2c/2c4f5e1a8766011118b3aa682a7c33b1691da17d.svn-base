<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.htkj.cfdScenic.app.dao.TravelogsDao">
	<select id="getTraveLogs" parameterType="map" resultType="map">
		SELECT
			t.id,
			t.title,
			t.comtent,
			t.travel_img1,
			t.travel_img2,
			t.travel_img3,
			t.travel_img4,
			t.travel_video,
			DATE_FORMAT(t.createdate,'%Y-%c-%d %h:%i:%s') as createdate,
			t.address,
			t.type,
			cu.nick_name,
			cu.head_img
		from 
			travelogs t join consumer_user cu on t.user_id = cu.id
		order by t.createdate desc
	</select>
	<select id="getTraveLogs_count" parameterType="map" resultType="int">
		SELECT
			count(1)
		from 
			travelogs t join consumer_user cu on t.user_id = cu.id
		order by t.createdate desc
	</select>
	<select id="getWonderful" parameterType="map" resultType="map">
		select
			t.id,
			t.title,
			t.comtent,
			t.travel_img1,
			t.travel_img2,
			t.travel_img3,
			t.travel_img4,
			t.travel_video,
			DATE_FORMAT(t.createdate,'%Y-%c-%d %h:%i:%s') as createdate,
			t.address,
			t.type,
			cu.nick_name,
			cu.head_img
		from
			travelogs t join consumer_user cu on t.user_id = cu.id
		where
			type = #{type}
	</select>
	<select id="getWonderful_count" parameterType="map" resultType="int">
		select
			count(1)
		from
			travelogs t join consumer_user cu on t.user_id = cu.id
		where
			type = #{type}
	</select>
	<select id="getCommentById" parameterType="map" resultType="map">
		select
			id,
			create_time,
			have_img,
			cu.
		from
			user_comment uc join consumer_user cu on uc.link_id = cu.id
		where
			link_id = #{id} AND comment_type = 3
	</select>
</mapper>