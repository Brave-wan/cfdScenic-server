var userCheckManager = {
	checkUrl : "./background/UserCheck/checkUser",
	setMoenyUrl : "./background/UserCheck/setUserMoeny",
	showPageUrl : "./background/UserCheck/showPage",
	init : function(){
		$(window).load(function(){
			$('#userCheckGid').datagrid({
				url:'./background/UserCheck/userCheckData.json',
				border:false,
				fit:true,
				singleSelect:true,
				idField:'id',
				pagination:true,
				pageSize:20,
				striped:true,
				fitColumns:true,
				queryParams : {
					type : 0
				},
				columns : [ [ {
					field : 'id',
					title : 'id',
					align:'center',width:100,hidden:true

				}, {
					field : 'userid',
					title : '申请认证人id',
					align:'center',width:100,hidden:true
				},{
					field : 'nickName',
					title : '申请认证人',
					align:'center',width:100
				}, {
					field : 'imageurl1',
					title : '手持身份证图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl2',
					title : '身份证正面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl3',
					title : '身份证反面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl4',
					title : '艺术照图1',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl5',
					title : '艺术照图2',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'createtime',
					title : '申请时间',
					align:'center',width:100
				}, {
					field : 'masterhourlyrate',
					title : '服务价格',
					align:'center',width:100
				},{
					field : 'status',
					title : '认证状态',
					align:'center',width:100,
					formatter : function(v, r, i) {
						switch (v) {
						case 0:
							return "未认证";
						case 1:
							return "认证通过";
						case 2:
							return "失败";
						}
					}
				}, {
					field : 'checktime',
					title : '认证时间',
					align:'center',width:100
				}, {
					field : 'opt',
					title : '操作',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.showPage('+"'"+ r.id + "'"+');">查看详情</a>';
					}
				} ] ]
			});
		});
	},
	showPage :function (id) {
		window.location.href = userCheckManager.showPageUrl+"?id="+id+"&t="+$('#nowType').val();
	},
	toCheck : function(t){
		var row=$('#userCheckGid').datagrid('getSelected');
		if(!row){
			eu.showMsg("请选择一行再进行审核");
			return;
		}
		var m = "审核失败";
		if(t == 0){
			m = "审核通过";
		}
		$.messager.confirm("提示信息","您确定要"+m+"所选数据吗？",function(r){
			if(r){
				$.post(userCheckManager.checkUrl,{id : row.id , state:t , type : $('#nowType').val(),uid : row.userid})
				.success(function(data){
								if(data.success){
									eu.showMsg("操作成功！");
									$("#userCheckGid").datagrid('reload');
								}else{
									eu.showMsg(data);
								}
							}
						).error(function(data){
				        	eu.showMsg("系统错误，请联系管理员！");
				        })
			}else{
				$('#userCheckGid').datagrid('clearSelections');
			}
			});
	},
	serch : function () {
 		var type = $('#searchValue').combobox('getValue');
		$('#userCheckGid').datagrid('clearSelections');
		switch (type) {
		case '0':
			$('#userCheckGid').datagrid({
				url:'./background/UserCheck/userCheckData.json',
				border:false,
				fit:true,
				singleSelect:true,
				idField:'id',
				pagination:true,
				pageSize:20,
				striped:true,
				fitColumns:true,
				queryParams : {
					type : type
				},
				columns : [ [ {
					field : 'id',
					title : 'id',
					align:'center',width:100,hidden:true

				}, {
					field : 'userid',
					title : '申请认证人id',
					align:'center',width:100,hidden:true
				},{
					field : 'nickName',
					title : '申请认证人',
					align:'center',width:100
				}, {
					field : 'imageurl1',
					title : '手持身份证图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl2',
					title : '身份证正面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl3',
					title : '身份证反面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl4',
					title : '艺术照图1',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl5',
					title : '艺术照图2',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'createtime',
					title : '申请时间',
					align:'center',width:100
				}, {
					field : 'masterhourlyrate',
					title : '服务价格',
					align:'center',width:100
				},{
					field : 'status',
					title : '认证状态',
					align:'center',width:100,
					formatter : function(v, r, i) {
						switch (v) {
						case 0:
							return "未认证";
						case 1:
							return "认证通过";
						case 2:
							return "失败";
						}
					}
				}, {
					field : 'checktime',
					title : '认证时间',
					align:'center',width:100
				}, {
					field : 'opt',
					title : '操作',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.showPage('+"'"+ r.id + "'"+');">查看详情</a>';
					}
				}  ] ]
			});
			break;
		case '1':
			$('#userCheckGid').datagrid({
				url:'./background/UserCheck/userCheckData.json',
				border:false,
				fit:true,
				singleSelect:true,
				idField:'id',
				pagination:true,
				pageSize:20,
				striped:true,
				fitColumns:true,
				queryParams : {
					type : type
				},
				columns : [ [ {
					field : 'id',
					title : 'id',
					align:'center',width:100,hidden:true

				},{
					field : 'userid',
					title : '申请认证人id',
					align:'center',width:100,hidden:true
				}, {
					field : 'nickName',
					title : '申请认证人',
					align:'center',width:100
				}, {
					field : 'imageurl1',
					title : '手持身份证图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl2',
					title : '身份证正面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl3',
					title : '身份证反面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl4',
					title : '导游证图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'createtime',
					title : '申请时间',
					align:'center',width:100
				}, {
					field : 'guideshourlyrate',
					title : '服务价格',
					align:'center',width:100
				},{
					field : 'status',
					title : '认证状态',
					align:'center',width:100,
					formatter : function(v, r, i) {
						switch (v) {
						case 0:
							return "未认证";
						case 1:
							return "认证通过";
						case 2:
							return "失败";
						}
					}
				}, {
					field : 'checktime',
					title : '认证时间',
					align:'center',width:100
				}, {
					field : 'opt',
					title : '操作',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.showPage('+"'"+ r.id + "'"+');">查看详情</a>';
					}
				} ] ]
			});
			break;
		case '2':
			$('#userCheckGid').datagrid({
				url:'./background/UserCheck/userCheckData.json',
				border:false,
				fit:true,
				singleSelect:true,
				idField:'id',
				pagination:true,
				pageSize:20,
				striped:true,
				fitColumns:true,
				queryParams : {
					type : type
				},
				columns : [ [ {
					field : 'id',
					title : 'id',
					align:'center',width:100,hidden:true

				}, {
					field : 'userid',
					title : '申请认证人id',
					align:'center',width:100,hidden:true
				},{
					field : 'nickName',
					title : '申请认证人',
					align:'center',width:100
				}, {
					field : 'imageurl1',
					title : '手持身份证图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl2',
					title : '身份证正面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl3',
					title : '身份证反面图',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl4',
					title : '驾驶证',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				}, {
					field : 'imageurl5',
					title : '行驶本',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ v + "'"+');">查看</a>';
					}
				},{
					field : 'imageurl6',
					title : '人车合影',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.show('+"'"+ r + "'"+');">查看</a>';
					}
				}, {
					field : 'createtime',
					title : '申请时间',
					align:'center',width:100
				}, {
					field : 'drivershourlyrate',
					title : '服务价格',
					align:'center',width:100
				},{
					field : 'status',
					title : '认证状态',
					align:'center',width:100,
					formatter : function(v, r, i) {
						switch (v) {
						case 0:
							return "未认证";
						case 1:
							return "认证通过";
						case 2:
							return "失败";
						}
					}
				}, {
					field : 'checktime',
					title : '认证时间',
					align:'center',width:100
				}, {
					field : 'opt',
					title : '操作',
					align:'center',width:100,
					formatter:function(v,r,i){
						 return "<a style='background-color: #2daebf;color: #fff;cursor: pointer;display: "+   
			               "inline-block;font-size: 9pt;font-weight: bold;margin-right: 10px;padding: "+  
			               "3px 8px;text-decoration: none;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.25);' href='javascript:void(0)'" +   
			               'onclick="userCheckManager.showPage('+"'"+ r.id + "'"+');">查看详情</a>';
					}
				} ] ]
			});
			break;
		}
		$('#nowType').val(type);
	},
	setMoeny : function(){
		var row=$('#userCheckGid').datagrid('getSelected');
		if(!row){
			eu.showMsg("请选择一行再进行设置服务价格");
			return;
		}
		if(row.status != 1){
			eu.showMsg("请先审核通过再进行服务价设置");
			return;
		}
		$('#nowUserId').val(row.userid);
		$('#userCheckWindow').window('open');
		var t = $('#nowType').val();
		switch (t) {
		case '0':
			$('#moeny').val(row.masterhourlyrate);
			break;
		case '1':
			$('#moeny').val(row.guideshourlyrate);
			break;
		case '2':
			$('#moeny').val(row.drivershourlyrate);
			break;
		}
	},
	clearForm:function(){
		$('#userCheckForm').form('clear');
	},
	cancel:function(){
		$('#userCheckWindow').window('close');
	},
	submit:function(){
		$.messager.progress({title:'提示信息',msg:'请稍候...',interval:2000});
		$.post(userCheckManager.setMoenyUrl,{id : $('#nowUserId').val(),type : $('#nowType').val(),moeny : $('#moeny').val()})
		.success(function(data){
			$.messager.progress('close');
			if(data.success){
				eu.showMsg("服务价格设置成功！");
				$('#userCheckWindow').window('close');
				$('#userCheckGid').datagrid('reload');
			}else{
				eu.showMsg(data);
			}
		})
		.error(function(data){
			$.messager.progress('close');
			eu.showMsg("系统错误！");
		});
	},
	show : function(url){
		$('#ImgWindow').window('open');
		$('#showImg').attr('src',url);
	}
};
userCheckManager.init();