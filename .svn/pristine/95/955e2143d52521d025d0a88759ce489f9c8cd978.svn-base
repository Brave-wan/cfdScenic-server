<%@ page contentType="text/html; charset=UTF-8" trimDirectiveWhitespaces="true"%>
<%@ include file="/WEB-INF/views-commons/header.jsp"%>
<style type="text/css">
	body{font-family: "微软雅黑";}
	table{width:90%;margin:20px auto;}
	table td{height:45px;text-align:left;}
	table td:first-child{width:10%;}
	table td:last-child{width:90%;}
	table td input[type=text]{width:80%;height:30px;line-height: 30px;padding-left: 10px;}
	table img{width:150px;height:100px;}
	table td textarea{padding-left:10px;}
	table td label{float: left;width:100px;text-align: left;}
	.l-btn-text{line-height: 30px;}
	.easyui-linkbutton{width:30%;height:30px;display: inline-block;}
</style>
<div style="width:98.5%;padding:10px;">
		<div style="padding:8px 2px;border-bottom:1px solid #ccc">当前位置:商家管理-修改商品</div>
			<form id="ff" action="./background/shopGoodsManage/addshopGoods" method="post" enctype="multipart/form-data">
                <input type="hidden" name="id" value="${model.id}"/>
				<table>
					<tr>
						<td>商品名称：</td>
						<td><input type="text" name="goodsName" value="${model.goodsName}"/></td>
					</tr>
					<tr>
						<td>商品描述：</td>
						<td><input type="text" name="goodsDescribe" value="${model.goodsDescribe}"/></td>
					</tr>
					<tr>
						<td>原价：</td>
						<td><input type="text" name="price" value="${model.price}" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" onafterpaste="this.value=this.value.replace(/[^0-9]/g,'')" /></td>
					</tr>
					<tr>
						<td>新价：</td>
						<td><input type="text" name="newPrice" value="${model.newPrice}" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" onafterpaste="this.value=this.value.replace(/[^0-9]/g,'')" /></td>
					</tr>
					<tr>
						<td>配送费：</td>
						<td><input type="text" name="deliverFee" value="${model.deliverFee}" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" onafterpaste="this.value=this.value.replace(/[^0-9]/g,'')" /></td>
					</tr>
					<tr>
						<td>库存：</td>
						<td><input type="text" name="stock" value="${model.stock}" /></td>
                    </tr>
					<tr>
						<td>是否推荐：</td>
						<td>
						<input type="radio" <c:if test="${model.isRecomment == 0}">checked="checked"</c:if>  name="isRecomment" value="0">否
						<input type="radio" <c:if test="${model.isRecomment == 1}">checked="checked"</c:if>  name="isRecomment" value="1">是
						</td>
					</tr>
					<tr>
						<td>是否热销：</td>
						<td>
						<input type="radio" <c:if test="${model.isHot == 0}">checked="checked"</c:if> name="isHot" value="0">否
						<input type="radio" <c:if test="${model.isHot == 1}">checked="checked"</c:if> name="isHot" value="1">是
						</td>
					</tr>
					<tr>
						<td>状态：</td>
						<td>
						<input type="radio" <c:if test="${model.state == 0}">checked="checked"</c:if> name="state" value="0">正常
						<input type="radio" <c:if test="${model.state == 1}">checked="checked"</c:if> name="state" value="1">停用
						</td>
					</tr>
                    <tr>
                        <td>所属店铺：</td>
                        <td>
                            <select name="shopInformationId">
                                <c:forEach items="${list}" var="list">
                                    <option value="${list.id}">${list.name}</option>
                                </c:forEach>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>商品类型：</td>
                        <td>
                            <select name="type">
                                <%--<option value="1">酒店</option>
                                <option value="2">饭店</option>--%>
                                <option value="3" <c:if test="${model.type == 3}">selected</c:if> >特产</option>
                                <option value="4" <c:if test="${model.type == 4}">selected</c:if> >小吃</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>主图：</td>
                        <td>
                            <img alt="" src="${model.describeImg }">
                        </td>
                    </tr>

					<tr>
						<td>修改主图：</td>
						<td>
							<input type="file" name="imageFile" />
						</td>
					</tr>
					<tr>
						<td>景区详情：</td>
						<td>
							<script id="editor" type="text/plain" style="width:1024px;height:500px;"></script>
                            <input type="hidden" name="contentId" id="contentId" value="${model.contentId}" />
						</td>
					</tr>
				</table>
				<div style="text-align:center;padding:5px">
 					<a id="showPageSaveBtn" href="javascript:void(0)" onclick="save()" class="easyui-linkbutton" iconCls="icon-save">确定</a>
					<%--<a id="showPageCancleBtn" href="javascript:void(0)" onclick="window.location.href ='./background/visitorsManage/toVisitorsManage'" class="easyui-linkbutton" iconCls="icon-cancel">取消</a>--%>
					<a id="showPageCancleBtn" href="javascript:void(0)" onclick="history.go(-1)" class="easyui-linkbutton" iconCls="icon-cancel">取消</a>
			    </div>
			</form>
</div>

<script type="text/javascript">

    $(function () {
        UE.getEditor('editor').addListener("ready", function () {
            UE.getEditor('editor').setContent('${htmlText.contentHtml}');
        })
    })

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor');


	//获取内容
    function getAllHtml() {
        alert(UE.getEditor('editor').getContent())
    }
   
	//获取纯文本内容
    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('editor').getContentTxt());
        alert(arr.join("\n"));
    }

    function save() {

        var arr = [];
        arr.push(UE.getEditor('editor').getContentTxt());

        $.post("${basePath}/htmlText/addHtmlText", {
            id: $("#contentId").val(),
            contentText: arr.join("\n"),
            contentHtml: UE.getEditor('editor').getContent(),
            activityDetail: UE.getEditor('editor').getContent(),
            type: 2,
            state: 0
        }).success(function (data) {
            if (data.success) {
                $('#ff').submit();
            } else {
                eu.showMsg(data);
            }
        }).error(function (data) {
            eu.showMsg("系统错误，请联系管理员！");
        })

	}
   
</script>

<!-- <div id="ImgWindow" class="easyui-window" title="图片查看" data-options="closed:true,inline:true"
	style="width: 420px; height: 380px; padding: 5px;">
	<div class="easyui-layout" data-options="fit:true">
		<div data-options="region:'center'" style="padding: 10px;">
				<p>
					<img alt="图片暂时无法显示" style="width: 350px;height: auto" src="" id="showImg">
				</p>
		</div>
		<div data-options="region:'south',border:false" style="text-align: right; padding: 5px 0 0;">
			<a class="easyui-linkbutton" data-options="iconCls:'icon-cancel'" href="javascript:void(0)" onclick="$('#ImgWindow').window('close');">关闭</a>
		</div>
	</div>
</div> -->
<%@ include file="/WEB-INF/views-commons/footer.jsp"%>